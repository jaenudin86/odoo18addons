<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ========================= -->
    <!-- PRODUCT TEMPLATE FORM -->
    <!-- ========================= -->
    <record id="view_product_template_form_article" model="ir.ui.view">
        <field name="name">product.template.form.article</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">

            <!-- HIDE PRODUCT TYPE -->
            <xpath expr="//field[@name='type']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='barcode']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

                    <!-- Update Quantity -->
            <xpath expr="//button[@name='action_update_quantity_on_hand']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>


            <!-- Replenish -->
            <!-- <xpath expr="//button[@name='action_replenish']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <!-- Print Labels -->
            <!-- <xpath expr="//button[contains(@class,'o_button_print')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->
        

            <!-- FIELD TAMBAHAN -->
            <xpath expr="//field[@name='type']" position="before">

               

                <!-- PSIT -->
                <field name="brand" required="true"/>
                 <field name="is_article" widget="radio"/>

                <field name="dimension"
                       invisible="is_article != 'no' "
                       required="is_article == 'no'"/>

                <field name="base_colour"
                       invisible="is_article != 'no'"
                       required="is_article == 'no'"/>

                <field name="text_colour"
                       invisible="is_article != 'no'"
                       required="is_article == 'no'"/>


                <!-- ATC -->
                                <!-- ATC -->
                <field name="date_month_year"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>
                <field name="ingredients"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="Edition"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="gross_weight"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="net_weight"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="net_net_weight"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>
                
                                 <!-- ATC -->
                <field name="date_month_year"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>
                <field name="ingredients"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="Edition"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="gross_weight"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="net_weight"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="net_net_weight"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

            </xpath>
            
                <!-- Hapus default_code dari posisi aslinya -->
            <!-- Hapus default_code dari posisi aslinya -->
<xpath expr="//field[@name='default_code']" position="replace"/>

<!-- Tambahkan default_code dengan kondisi di bawah brand -->
<xpath expr="//field[@name='brand']" position="after">
    <field name="default_code"
           string="PSIT Number"
           invisible="is_article != 'no'"
           readonly="is_article == 'var'"
           force_save="1"/>
    <field name="default_code"
           string="ATC Number"
           invisible="is_article != 'yes'"
           readonly="is_article == 'var'"
           force_save="1"/>
    <field name="default_code"
           string="ATC Number"
           invisible="is_article != 'var'"
           readonly="is_article == 'var'"
           force_save="1"/>
</xpath>

                <xpath expr="//field[@name='is_article']" position="after">
                <field name="parent_article_id" 
                    invisible="is_article != 'var'" 
                    required="is_article == 'var'"
                    options="{'no_create': True}"/>
            </xpath>

            <!-- <xpath expr="//field[@name='default_code']" position="attributes">
                <attribute name="readonly">is_article == 'var'</attribute>
                <attribute name="force_save">1</attribute>
            </xpath> -->

        </field>
    </record>

    <!-- ========================= -->
    <!-- PRODUCT TEMPLATE TREE -->
    <!-- ========================= -->
    <record id="view_product_template_tree_article" model="ir.ui.view">
        <field name="name">product.template.tree.article</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_tree_view"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='name']" position="after">
                <field name="is_article"/>
                <field name="brand"/>
            </xpath>

        </field>
    </record>

    <!-- ========================= -->
    <!-- PRODUCT VARIANT FORM -->
    <!-- ========================= -->
    <record id="view_product_variant_form_article" model="ir.ui.view">
        <field name="name">product.product.form.article</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_normal_form_view"/>
        <field name="arch" type="xml">

            <!-- HIDE TYPE -->
            <xpath expr="//field[@name='type']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

                        <!-- Update Quantity -->
            <xpath expr="//button[@name='action_update_quantity_on_hand']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <!-- Replenish -->
            <!-- <xpath expr="//button[@name='action_replenish']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <!-- Print Labels -->
            <!-- <xpath expr="//button[contains(@class,'o_button_print')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <xpath expr="//field[@name='type']" position="after">

                

                <!-- PSIT -->
                <field name="brand"
                       required="is_article == 'no'"/>
                <field name="is_article" widget="radio"/>

                <!-- ATC -->
                <field name="date_month_year"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>
                <field name="ingredients"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="Edition"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="gross_weight"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="net_weight"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>

                <field name="net_net_weight"
                       invisible="is_article != 'yes'"
                       required="is_article == 'yes'"/>


            
                <!-- ATC -->
                <field name="date_month_year"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>
                <field name="ingredients"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="Edition"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="gross_weight"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="net_weight"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                <field name="net_net_weight"
                       invisible="is_article != 'var'"
                       required="is_article == 'var'"/>

                


            </xpath>

            <!-- DEFAULT CODE -->
            <xpath expr="//field[@name='default_code']" position="replace">
                <field name="default_code"
                       string="PSIT Number"
                       invisible="is_article != 'no'"/>

                <field name="default_code"
                       string="ATC Number"
                       invisible="is_article != 'yes'"/>
                
                <field name="default_code"
                       string="ATC Variant Number"
                       invisible="is_article != 'var'"/>
            </xpath>

        </field>
    </record>

    <!-- ========================= -->
    <!-- SEQUENCES -->
    <!-- ========================= -->

    <record id="seq_article_number" model="ir.sequence">
        <field name="name">Article Number</field>
        <field name="code">article.number.sequence</field>
        <field name="prefix">ATC%(day)s%(month)s%(year)s</field>
        <field name="padding">3</field>
        <field name="implementation">standard</field>
        <field name="use_date_range">True</field>
    </record>

    <record id="seq_psit_number" model="ir.sequence">
        <field name="name">PSIT Number</field>
        <field name="code">pist.number.sequence</field>
        <field name="prefix">PSIT%(year)s</field>
        <field name="padding">4</field>
        <field name="implementation">standard</field>
        <field name="use_date_range">True</field>
    </record>

</odoo>