<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Form View Extension untuk Stock Warehouse -->
        <record id="view_warehouse_form_custom" model="ir.ui.view">
            <field name="name">stock.warehouse.form.custom</field>
            <field name="model">stock.warehouse</field>
            <field name="inherit_id" ref="stock.view_warehouse"/>
            <field name="arch" type="xml">
                <!-- Tambahkan tab baru untuk Warehouse Details -->
                <xpath expr="//notebook" position="inside">
                    <page string="Warehouse Details" name="warehouse_details">
                        <group>
                            <group string="Basic Information">
                                <field name="x_warehouse_type" required="1"/>
                                <field name="x_warehouse_number" required="1" readonly="1"/>
                                <field name="x_brand_code"/>
                                <!-- <field name="x_sequence_number"/> -->
                            </group>
                            <group string="Contact Information">
                                <field name="x_pic_name"/>
                                <field name="x_email_warehouse" widget="email"/>
                                <field name="x_mobile_phone_no" widget="phone"/>
                                <field name="x_npwp_warehouse"/>
                            </group>
                        </group>
                        
                        <group string="Addresses">
                            <group>
                                <field name="x_legal_address" placeholder="Legal address..."/>
                                <field name="x_operational_address" placeholder="Operational address..."/>
                                <field name="x_location_address" placeholder="Location address..."/>
                            </group>
                            <group>
                                <field name="x_city_name"/>
                                <field name="x_zip_code"/>
                                <field name="x_location"/>
                            </group>
                        </group>
                        
                        <group string="Store Information" attrs="{'invisible': [('x_warehouse_type', '!=', 'whs')]}">
                            <group>
                                <field name="x_pic_store"/>
                                <field name="x_dept_store_name"/>
                            </group>
                            <group>
                                <field name="x_location_name"/>
                                <field name="x_receipt_store"/>
                            </group>
                        </group>
                        
                        <group string="Photos and QR Code">
                            <group>
                                <field name="x_front_photo" widget="image" options="{'size': [200, 200]}"/>
                                <label for="x_front_photo" string="Front Photo"/>
                            </group>
                            <group>
                                <field name="x_inside_photo" widget="image" options="{'size': [200, 200]}"/>
                                <label for="x_inside_photo" string="Inside Photo"/>
                            </group>
                            <group>
                                <field name="x_photo_spv_spl" widget="image" options="{'size': [200, 200]}"/>
                                <label for="x_photo_spv_spl" string="Photo SPV &amp; SPL"/>
                            </group>
                            <group>
                                <field name="x_qr_code" widget="image" options="{'size': [200, 200]}"/>
                                <label for="x_qr_code" string="QR Code"/>
                            </group>
                        </group>
                    </page>
                </xpath>
                
                <!-- Tambahkan warehouse type dan number di header -->
                <xpath expr="//sheet/div[@name='button_box']" position="after">
                    <div class="oe_title">
                        <h1>
                            <field name="x_warehouse_number" readonly="1" class="oe_inline"/>
                        </h1>
                        <h2>
                            <field name="x_warehouse_type" widget="badge" class="oe_inline"/>
                        </h2>
                    </div>
                </xpath>
            </field>
        </record>
        
        <!-- Tree View Extension -->
        <record id="view_warehouse_tree_custom" model="ir.ui.view">
            <field name="name">stock.warehouse.tree.custom</field>
            <field name="model">stock.warehouse</field>
            <field name="inherit_id" ref="stock.view_warehouse_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="x_warehouse_type"/>
                    <field name="x_warehouse_number"/>
                    <field name="x_brand_code"/>
                    <field name="x_pic_name"/>
                    <field name="x_city_name"/>
                </xpath>
            </field>
        </record>
        
        <!-- Search View Extension -->
        <record id="view_warehouse_search_custom" model="ir.ui.view">
            <field name="name">stock.warehouse.search.custom</field>
            <field name="model">stock.warehouse</field>
            <field name="inherit_id" ref="stock.view_warehouse_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <field name="x_warehouse_type"/>
                    <field name="x_warehouse_number"/>
                    <field name="x_brand_code"/>
                    <field name="x_pic_name"/>
                    <field name="x_city_name"/>
                    
                    <filter string="Gudang Pusat (WHC)" name="filter_whc" 
                            domain="[('x_warehouse_type', '=', 'whc')]"/>
                    <filter string="Gudang Online (WHO)" name="filter_who" 
                            domain="[('x_warehouse_type', '=', 'who')]"/>
                    <filter string="Gudang Offline (WHS)" name="filter_whs" 
                            domain="[('x_warehouse_type', '=', 'whs')]"/>
                    
                    <group expand="0" string="Group By">
                        <filter string="Warehouse Type" name="group_warehouse_type" 
                                context="{'group_by': 'x_warehouse_type'}"/>
                        <filter string="Brand" name="group_brand" 
                                context="{'group_by': 'x_brand_code'}"/>
                        <filter string="City" name="group_city" 
                                context="{'group_by': 'x_city_name'}"/>
                    </group>
                </xpath>
            </field>
        </record>
        
    </data>
</odoo>