<odoo>
    <record id="action_report_stock_picking_qrcode" model="ir.actions.report">
        <field name="name">Lot/SN QRCode Labels</field>
        <field name="model">stock.picking</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">brodher.stock_picking_qrcode_report</field>
        <field name="report_file">brodher.stock_picking_qrcode_report</field>
        <field name="binding_model_id" ref="stock.model_stock_picking"/>
        <field name="binding_type">report</field>
    </record>
    <record id="action_report_stock_picking_qrcode_barcode" model="ir.actions.report">
        <field name="name">QRCode Labels</field>
        <field name="model">stock.picking</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">brodher.stock_picking_qrcode_barcode_report</field>
        <field name="report_file">brodher.stock_picking_qrcode_barcode_report</field>
        <field name="binding_model_id" ref="stock.model_stock_picking"/>
        <field name="binding_type">report</field>
    </record>

    <!-- QR Code untuk Lot/SN -->
    <template id="brodher.stock_picking_qrcode_report">
        <t t-call="web.basic_layout">
            <style>
                .label-container {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 12mm; /* jarak antar label */
                }
                .label {
                    width: 45mm;
                    height: 30mm;
                    
                    text-align: center;
                    padding: 2mm;
                    box-sizing: border-box;
                    page-break-inside: avoid;
                }
                .label img {
                    width: 20mm;
                    height: 20mm;
                }
                .page-break {
                    page-break-after: always;
                }
            </style>


            <t t-foreach="docs" t-as="picking">
                <div class="label-container">
                    <t t-foreach="picking.move_line_ids" t-as="line">
                        <t t-if="line.lot_id">
                            <div class="label">
                                <strong><t t-esc="line.product_id.display_name"/></strong><br/>
                                <span><t t-esc="line.lot_id.name"/></span><br/>
                                <img t-att-src="'/report/barcode/QR/%s' % line.lot_id.name"/>
                            </div>
                        </t>
                    </t>
                </div>
                <div class="page-break"></div>
            </t>
        </t>
    </template>

    <!-- QR Code untuk Barcode Produk -->
    <template id="brodher.stock_picking_qrcode_barcode_report">
        <t t-call="web.basic_layout">
            <style>
                .label-container {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 12mm; /* jarak antar label */
                }
                .label {
                    width: 45mm;
                    height: 30mm;
                    
                    text-align: center;
                    padding: 2mm;
                    box-sizing: border-box;
                    page-break-inside: avoid;
                }
                .label img {
                    width: 20mm;
                    height: 20mm;
                }
                .page-break {
                    page-break-after: always;
                }
            </style>

            <t t-foreach="docs" t-as="picking">
                <div class="label-container">
                    <t t-foreach="picking.move_line_ids" t-as="line">
                        <t t-if="line.lot_id">
                            <div class="label">
                                <strong><t t-esc="line.product_id.display_name"/></strong><br/>
                                <span><t t-esc="line.product_id.barcode"/></span><br/>
                                <img t-att-src="'/report/barcode/QR/%s' % (line.product_id.barcode or line.product_id.default_code or '')"/>
                            </div>
                        </t>
                    </t>
                </div>
                <div class="page-break"></div>
            </t>
        </t>
    </template>
</odoo>
